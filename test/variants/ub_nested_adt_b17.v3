//@execute 0=1; 1=-2; 2=1; 3=1; 4=3; 5=-4; 6=0; 7=1; 8=-5; 9=1; 10=6; 11=1; 12=-7; 13=0; 14=8; 15=1
type C1(a: i14, b: bool, c: float) #unboxed #packed {}
type C2(a: i14, b: bool, c: u15) #unboxed #packed {}
type A #unboxed #packed {
    case One(a: u15, c: C1) #unboxed #packed;
    case Two(a: C2, d: float) #unboxed #packed;
}

def arr: Array<A> = [
    A.One(1, C1(-2, true, 1F)), 
    A.One(3, C1(-4, false, 2F)), 
    A.Two(C2(-5, true, 6), 1F), 
    A.Two(C2(-7, false, 8), 2F)
];

def main(a: int) -> int {
    match(a) {
        0 => return A.One.!(arr[0]).a;
        1 => return A.One.!(arr[0]).c.a;
        2 => return int.view<bool>(A.One.!(arr[0]).c.b);
        3 => return if(A.One.!(arr[0]).c.c == 1F, 1, 0);

        4 => return A.One.!(arr[1]).a;
        5 => return A.One.!(arr[1]).c.a;
        6 => return int.view<bool>(A.One.!(arr[1]).c.b);
        7 => return if(A.One.!(arr[1]).c.c == 2F, 1, 0);

        8 => return A.Two.!(arr[2]).a.a;
        9 => return int.view<bool>(A.Two.!(arr[2]).a.b);
        10 => return A.Two.!(arr[2]).a.c;
        11 => return if(A.Two.!(arr[2]).d == 1F, 1, 0);

        12 => return A.Two.!(arr[3]).a.a;
        13 => return int.view<bool>(A.Two.!(arr[3]).a.b);
        14 => return A.Two.!(arr[3]).a.c;
        15 => return if(A.Two.!(arr[3]).d == 2F, 1, 0);
        _ => return 42;
    }
}