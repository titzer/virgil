//@execute 0=1; 1=-2; 2=1; 3=1; 4=3; 5=-4; 6=0; 7=1; 8=-5; 9=1; 10=1; 11=6; 12=-7; 13=1; 14=0; 15=8
type A #unboxed #packed {
    case One(a: (u15, i14), b: (bool, float)) #unboxed #packed;
    case Two(a: (i14, float), b: (bool, u15)) #unboxed #packed;
}

def arr: Array<A> = [
    A.One((1, -2), (true, 1F)), 
    A.One((3, -4), (false, 2F)), 
    A.Two((-5, 1F), (true, 6)), 
    A.Two((-7, 2F), (false, 8))
];

def main(a: int) -> int {
    match(a) {
        0 => return A.One.!(arr[0]).a.0;
        1 => return A.One.!(arr[0]).a.1;
        2 => return int.view<bool>(A.One.!(arr[0]).b.0);
        3 => return if(A.One.!(arr[0]).b.1 == 1F, 1, 0);

        4 => return A.One.!(arr[1]).a.0;
        5 => return A.One.!(arr[1]).a.1;
        6 => return int.view<bool>(A.One.!(arr[1]).b.0);
        7 => return if(A.One.!(arr[1]).b.1 == 2F, 1, 0);

        8 => return A.Two.!(arr[2]).a.0;
        9 => return if(A.Two.!(arr[2]).a.1 == 1F, 1, 0);
        10 => return int.view<bool>(A.Two.!(arr[2]).b.0);
        11 => return A.Two.!(arr[2]).b.1;

        12 => return A.Two.!(arr[3]).a.0;
        13 => return if(A.Two.!(arr[3]).a.1 == 2F, 1, 0);
        14 => return int.view<bool>(A.Two.!(arr[3]).b.0);
        15 => return A.Two.!(arr[3]).b.1;
        _ => return 42;
    }
}