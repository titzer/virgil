//@execute 0=1; 1=1; 2=1; 3=3; 4=0; 5=1; 6=1; 7=6; 8=1; 9=0; 10=8; 11=1
type C1(a: u30, b: bool) #unboxed #packed {}
type C2(a: u30, b: float) #unboxed #packed {}
type A #unboxed #packed {
    case One(a: C1, c: float) #unboxed #packed;
    case Two(a: bool, c: C2) #unboxed #packed;
}

def arr: Array<A> = [
    A.One(C1(1, true),  1F), 
    A.One(C1(3, false), 2F), 
    A.Two(true, C2(6, 1F)), 
    A.Two(false,C2(8, 2F))
];

def main(a: int) -> int {
    match(a) {
        0 => return A.One.!(arr[0]).a.a;
        1 => return int.view<bool>(A.One.!(arr[0]).a.b);
        2 => return if(A.One.!(arr[0]).c == 1F, 1, 0);

        3 => return A.One.!(arr[1]).a.a;
        4 => return int.view<bool>(A.One.!(arr[1]).a.b);
        5 => return if(A.One.!(arr[1]).c == 2F, 1, 0);

        6 => return int.view<bool>(A.Two.!(arr[2]).a);
        7 => return A.Two.!(arr[2]).c.a;
        8 => return if(A.Two.!(arr[2]).c.b == 1F, 1, 0);

        9 => return int.view<bool>(A.Two.!(arr[3]).a);
        10 => return A.Two.!(arr[3]).c.a;
        11 => return if(A.Two.!(arr[3]).c.b == 2F, 1, 0);
        _ => return 42;
    }
}