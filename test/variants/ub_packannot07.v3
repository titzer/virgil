//@execute 0=3;1=7;2=-1;3=-1
packing Q(x: 32): 32 = x;
packing P(x: 32, y: 32): 64 = #concat(x, y);

type T #packed #unboxed {
	case A(x: int, y: int) #packing P(Q(x), Q(y)) { def f() -> int { return x + y; } }
	case B(x: int, y: int) #packing P(Q(y), x) { def f() -> int { return x - y; } }

	def f() -> int;
}

def arr = [
	T.A(1, 2),
	T.A(3, 4),
	T.B(5, 6),
	T.B(7, 8)
];

def main(a: int) -> int {
	return arr[a].f();
}