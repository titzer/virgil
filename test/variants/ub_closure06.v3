//@execute 0=0; 1=1; 2=2; 3=!NullCheckException
enum E {
	A, B, C
}
type T #unboxed {
	case A(x: E);
	case B(f: E -> u2);
}

def main(a: int) -> int {
	var ts = [
		T.A(E.A),
		T.A(E.B),
		T.B(E.tag),
		T.B(null)
	];

	match (ts[a]) {
		A(x) => return int.!(x.tag);
		B(f) => return int.!(f(E.C));
	}
}
