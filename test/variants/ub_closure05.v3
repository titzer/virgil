//@execute 0=111; 1=222; 2=2; 3=!NullCheckException; 6=6
type T #unboxed {
	case A(x: double);
	case B(f: int -> double);
}

var ts = [
	T.A(111.0d),
	T.A(222.0d),
	T.B(double.!<int>),
	T.B(null)
];

def main(a: int) -> int {
	match (ts[a & 3]) {
		A(x) => return int.!(x);
		B(f) => return int.!(f(a));
	}
}
