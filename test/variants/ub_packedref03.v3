//@execute =25015000
//@heap-size=6000
type T #unboxed #packed {
	case X(x: Array<int>);
	case Y(y: int);
}

def main() -> int {
	var steps = 10000;
	def arr = Array<T>.new(steps);
	for (i < steps) {
		if (i % 2 == 0) arr[i] = T.X([1, 2, 3]);
		else arr[i] = T.Y(i);
	}

	var total = 0;
	for (i < steps) {
		match (arr[i]) {
			X(x) => total += x.length;
			Y(y) => total += y;
		}
	}
	return total;
}