//@execute 0=111; 1=222; 2=2; 3=!NullCheckException; 6=6
type T #unboxed {
	case A(x: double);
	case B(f: int -> double);
}

def main(a: int) -> int {
	var ts = [
		T.A(111.0d + a),
		T.A(221.0d + a),
		T.B(double.!<int>),
		T.B(null)
	];

	match (ts[a & 3]) {
		A(x) => return int.!(x);
		B(f) => return int.!(f(a));
	}
}
