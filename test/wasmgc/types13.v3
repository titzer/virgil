//@execute (0,0)=0; (1,2)=3; (2,7)=9

// Test a layout

layout L {
	+0	first: int;
	+4	second: u64;
	=12;
}
def hackLayout(r: Ref<L>) -> u64 {
	return u64.view(r.first) + r.second;
}

def apply(f: Ref<L> -> u64, r: Ref<L>) -> u64 {
	return f(r);
}

def main(m: int, n: int) -> int {
	var ab = Array<byte>.new(20);
	var r = Ref<L>.at(ab, 4);
	r.first = m;
	r.second = u64.view(n);
	return int.view(apply(hackLayout, r));
}
