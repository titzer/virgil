//@execute 0=true; 1=true

layout L {
    +0  i1: u32;
    +4  i2: u16;
    =6;
}
def A = Array<byte>.new(8);
def R = Ref<L>.at(A, 0);
def p(a: int) -> long {
    match (a) {
        0 => return long.view<Pointer>(Pointer.atField(R.i1));
        1 => return long.view<Pointer>(Pointer.atField(R.i2));
        _ => return 42L;
    }
}

def main(a: int) -> bool {
    match (a) {
        0 => return long.view<Pointer>(Pointer.atField(R.i1)) == p(0);
        1 => return long.view<Pointer>(Pointer.atField(R.i2)) == p(1);
        _ => return false;
    }

}