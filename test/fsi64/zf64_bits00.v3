//@execute = 42
def d_infinity  = 0x7ff0000000000000uL;
def d_minus_infinity    = 0xfff0000000000000uL;

def f64_bits(sign: int, exp: int, mantissa: u64) -> u64 {
	var bits = if(sign != 0, 0x8000000000000000ul);
	if (exp < -1076) return bits;
	if (exp <= -1023) {
		// subnormal; make implicit 1 explicit and shift right
		mantissa = 0x8000000000000000ul | mantissa >> 1;
		mantissa = mantissa >> u6.view(-1023 - exp);
		exp = -1023;
	} else if (exp >= 1024) {
		// saturate large exponents to infinity
		return if (sign != 0, d_minus_infinity, d_infinity);
	}
	bits |= (u64.view(u11.view(exp + 1023)) << 52);
	bits |= mantissa >> 12;
	return bits;
}
def main() -> int {
	var result = f64_bits(0, -1023, 0);
	if (result != 0x0008000000000000) return -1;
	return 42;
}
